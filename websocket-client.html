<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        display: flex;
        justify-content: center; /* Center horizontally */
        align-items: center; /* Center vertically */
        height: 100vh; /* Take up the full height of the viewport */
      }

      #container {
        width: 50%; /* Take up 50% of the viewport width */
        text-align: center; /* Center text horizontally */
      }

      h1 {
        margin-bottom: 20px; /* Add some space below the heading */
      }

      #chat-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 20px;
        height: 300px; /* Fixed height for the chat box */
        overflow-y: auto; /* Enable vertical scrolling */
      }

      #messages {
        margin-bottom: 10px;
      }

      #input-form {
        display: flex;
        align-items: center; /* Align items vertically */
      }

      #input-form div {
        margin-right: 10px;
      }

      label {
        margin-right: 5px;
      }

      input[type="text"] {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 3px;
        font-size: 16px;
        width: 100%; /* Take up 100% of the available width */
      }

      input[type="submit"] {
        margin-left: 10px;
        padding: 5px 10px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
      }

      input[type="submit"]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h1>Telegram Chat Bot</h1>
      <!-- New heading added -->
      <div id="chat-box">
        <div id="messages"></div>
      </div>

      <form id="input-form">
        <input
          type="text"
          id="message"
          name="message"
          placeholder="Enter Message..."
        />
        <input type="submit" value="Send" />
      </form>
    </div>

    <script>
      const webSocket = new WebSocket("ws://localhost:443/");

      webSocket.addEventListener("open", () => {
        console.log("We are connected");
      });

      webSocket.addEventListener("message", (event) => {
        console.log(event);

        const messages = JSON.parse(event.data);
        console.log(messages);
        const messagesDiv = document.getElementById("messages");

        messagesDiv.innerHTML = messages
          .map((message) => `<div>${message}</div>`)
          .join("");

        // Scroll to the bottom of the chat box
        messages.scrollTop = messages.scrollHeight;
      });

      function sendMessage(event) {
        event.preventDefault(); // Prevent form submission
        var inputMessage = document.getElementById("message");
        if (webSocket.readyState === WebSocket.OPEN) {
          webSocket.send(inputMessage.value);
          inputMessage.value = "";
        } else {
          console.error("WebSocket not open.");
        }
      }

      document
        .getElementById("input-form")
        .addEventListener("submit", sendMessage);
    </script>
  </body>
</html>
