<html>
  <head>
    <style>
      #chat-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 20px;
        height: 300px; /* Fixed height for the chat box */
        overflow-y: auto; /* Enable vertical scrolling */
      }

      #messages {
        margin-bottom: 10px;
      }

      #input-form {
        display: flex;
        align-items: center; /* Align items vertically */
      }

      #input-form div {
        margin-right: 10px;
      }

      label {
        margin-right: 5px;
      }

      input[type="text"] {
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 3px;
        font-size: 16px;
        flex: 1; /* Take remaining space */
      }

      input[type="submit"] {
        padding: 5px 10px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
      }

      input[type="submit"]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <div id="chat-box">
      <div id="messages"></div>
    </div>

    <form id="input-form">
      <div>
        <label for="message">Enter Message:</label>
        <input type="text" id="message" name="message" />
      </div>
      <input type="submit" value="Send" />
    </form>

    <script>
      const webSocket = new WebSocket("ws://localhost:443/");

      webSocket.addEventListener("open", () => {
        console.log("We are connected");
      });

      webSocket.addEventListener("message", (event) => {
        console.log(event);

        const messages = JSON.parse(event.data);
        const messagesDiv = document.getElementById("messages");

        messages.forEach((message) => {
          messagesDiv.innerHTML += message + "<br>";
        });
        // Scroll to the bottom of the chat box
        messages.scrollTop = messages.scrollHeight;
      });

      function sendMessage(event) {
        event.preventDefault(); // Prevent form submission
        var inputMessage = document.getElementById("message");
        if (webSocket.readyState === WebSocket.OPEN) {
          webSocket.send(inputMessage.value);
          inputMessage.value = "";
        } else {
          console.error("WebSocket not open.");
        }
      }

      document
        .getElementById("input-form")
        .addEventListener("submit", sendMessage);
    </script>
  </body>
</html>
